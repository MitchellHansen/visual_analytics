<!DOCTYPE html>
<html>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="svg_builder.js"></script>
<script src="graph_rendering.js"></script>
<script src="new_template_graph_rendering.js"></script>
<script src="index.js"></script>
<script src="transitions.js"></script>
<script src="api.js"></script>


<title>Visual Analytics</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="w3.css">
<link rel="stylesheet" href="style.css">
<body class="w3-content" style="max-width:1000px; min-width:800px">

<!--  Top navbar, hidden at application start  -->
<div class="w3-row hidden" id="navbar-row">
    <ul class="w3-navbar w3-black">
        <li>
            <button id="back-button" type="button" class="w3-btn w3-btn-block w3-hover-blue-grey w3-padding-16"
                    onclick="transfer_back()">Back
            </button>
        </li>
        <li>
            <button id="refresh-button" type="button" class="w3-btn w3-btn-block w3-hover-teal w3-padding-16"
                    onclick="get_test_set_statuses(); get_template_ids();">Refresh
            </button>
        </li>
    </ul>
</div>

<!--  The home page of the application -->
<div class="" id="home-row" style="min-width:1000px; max-width:800px;">

    <!--  Left hand container with buttons  -->
    <div class="w3-half w3-black w3-container w3-center" style="height:800px">

        <div class="w3-padding-64">
            <h1>Visual Analytics</h1>
        </div>

        <div class="w3-padding-64">
            <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey w3-padding-16"
                    onclick="show_trial_login()">Start Test
            </button>
            <button type="button" class="w3-btn w3-btn-block w3-hover-teal w3-padding-16"
                    onclick="show_training_info()">Training
            </button>
            <button type="button" class="w3-btn w3-btn-block w3-hover-dark-grey w3-padding-16" onclick="show_about()">
                About
            </button>
            <button type="button" class="w3-btn w3-btn-block w3-hover-brown w3-padding-16" onclick="show_admin_login()">
                Admin
            </button>
        </div>
    </div>

    <!--  Right hand container that holds hidden elements -->
    <!--  Hidden elements are displayed when buttons are pressed and their resulting javascript .show()'s -->
    <div class="w3-half w3-blue-grey w3-container" style="height:800px" id="right-hand-container">

        <div class="w3-padding-64 w3-center hidden" id="trial-login-div">

            <h5>Trial Login</h5>

            <div class="w3-row w3-padding">
                <form class="w3-container" id="trial-login-form">

                    <label>Trial Code</label>
                    <input class="w3-input" type="text" name="trial-code">

                </form>
            </div>
            <div class="w3-row w3-padding">
                <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey w3-padding-16"
                        onclick="trial_login_handler()">Login
                </button>
            </div>
        </div>

        <div class="w3-padding-64 w3-center hidden" id="about-div">

            <div class="w3-row">
                <h5>About</h5>
            </div>

            <div class="w3-row">
                <div class="w3-half w3-left-align">
                    <p>Group Members</p>
                </div>
                <div class="w3-left-align w3-half w3-right">
                    <p>
                        Mitchell Hansen<br>
                        Anthony Armatas<br>
                        Elliott Barcoe-Walsh
                    </p>
                </div>
            </div>

            <div class="w3-row">
                <div class="w3-half w3-left-align">
                    <p>What is Visual Analytics?</p>
                </div>
                <div class="w3-left-align w3-half w3-right">
                    <p>
                        Visual Analytics is the practice of finding alternate representations of data with
                        the goal being easier consumption of that data. Would you rather view your bank account
                        balance as a 1d array of numbers? Or a line graph? Should it be colored red when your balance is
                        low?
                    </p>
                </div>
            </div>
        </div>

        <div class="w3-padding-64 w3-center hidden" id="training-info-div">

            <div class="w3-row">
                <h5>How To Complete The Test</h5>
            </div>

            <div class="w3-row">
                <div class="w3-left-align">

                    <p>
                        Unsure about how to complete a visual analytics test?
                    <br>
                        Want to try them out to see how exactly the test will function?
                        Just want to practice a little?
                    </p>

                    <p>
                        Just click on the Begin Training button below and it will show you all you need to know!
                    </p>

                </div>
            </div>

            <div class="w3-row" style="padding:10px; margin-top:65px">
                <button type="button" class="w3-btn w3-btn-block w3-hover-green w3-padding-16"
                        onclick="begin_training_handler()">
                    Begin Training
                </button>
            </div>

        </div>

        <div class="w3-padding-64 w3-center hidden" id="admin-login-div">


            <div class="w3-row w3-padding">
                <h5>Admin Login</h5>
            </div>

            <div class="w3-row w3-padding">
                <form class="w3-container" id="admin-login-form">
                    <label>Username</label>
                    <input class="w3-input" type="text" name="username">

                    <label>Password</label>
                    <input class="w3-input" type="password" name="password">
                </form>
            </div>


            <div class="w3-row w3-padding">
                <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey w3-padding-16"
                        onclick="admin_login_handler()">Login
                </button>
            </div>

        </div>

    </div>
</div>

<!--  The bottom app container  -->
<div class="w3-row" id="slider-container">

    <!-- Landing page for testee's explains the test -->
    <div class="w3-light-grey w3-center hidden" style="min-height:800px" id="testing-start-panel">

        <h1>How To Choose</h1>
        <p><i><b>How do I choose which class each graph originated from?</b></i></p>
        <div id="selection_first_pics" style="display: inline-block">
            <img src="training_pics/graph_clean.jpg" alt="The full data representation test!"
                 style="width:100px;height:100px;">
            <img src="training_pics/graph_class1.jpg" alt="The full data representation test!"
                 style="width:100px;height:100px;">
            <img src="training_pics/graph_class2.jpg" alt="The full data representation test!"
                 style="width:100px;height:100px;">
        </div>
        <p>
            Each distorted graph is divided up into sections sections. Some sections are clearer representations of the
            classes than others.
            You need to find the section which, to you, best signifies either Cls 1 or 2
        </p>
        <img src="training_pics/graph_sections.jpg" alt="The full data representation test!"
             style="width:100px;height:100px;">
        <p>
            By clicking on the section you believe to be the best signifier of its class,
            the color of that section will change to reflect that.
        </p>
        <img src="training_pics/graph_class1_selection.jpg" alt="The full data representation test!"
             style="width:100px;height:100px;">
        <p>
            After the first click, the color of the chosen selection will change red to signify it has been selected as
            a Cls 1 graph.
            Clicking on it a second time will change it to green, the corisponding color of the Cls 2 graph. If clicked
            a third time
            it will revert back to its original unaltered state.
        </p>
        <img src="training_pics/graph_class2_selection.jpg" alt="The full data representation test!"
             style="width:100px;height:100px;">
        <img src="training_pics/graph_og_state.jpg" alt="The full data representation test!"
             style="width:100px;height:100px;">
        <p>
        </p>

        <div class="button-placement w3-row">
            <button class="w3-btn" style="" onclick="toggle_test_from_start()">
                Start the Test
            </button>
        </div>

    </div>

    <!-- Main testing panel which contains the graphs -->
    <div class="w3-light-grey w3-center hidden" style="min-height:800px" id="testing-test-panel">

        <div class="w3-row" id="svg-row">

        </div>

        <h1>TESTING</h1>

        <div class="w3-row" id="graph_space">

        </div>

        <div class="w3-row" id="practice_button_space"  style="">

            <div class="button-placement">
                <button class="w3-btn" style="" onclick="toggle_wait_from_test()">
                    Continue
                </button>
            </div>

        </div>
    </div>

    <!-- Testing wait panel, which a timer counts down until the next test -->
    <div class="w3-light-grey w3-center hidden" style="min-height:800px" id="testing-wait-panel">

        <div class="w3-row" id="svg-row">

        </div>

        <h1>TESTING WAIT</h1>

    </div>

    <!-- When there are no more tests, the users gets this page -->
    <div class="w3-light-grey w3-center hidden" style="min-height:800px" id="testing-finish-panel">

        <div class="w3-row" id="svg-row">

        </div>

        <h1>TESTING FINISH</h1>
        <h3>THANKS FOR PLAYING BITCHES</h3>

        <div class="w3-row" id="practice_button_space"  style="">

            <div class="button-placement">
                <button class="w3-btn" style="" onclick="stop_testing()">
                    Return Home
                </button>
            </div>

        </div>

    </div>

    <!-- First Training Window-->
    <div class="w3-light-grey w3-center hidden" style="min-height:800px" id="training-panel">
        <h1>How Visual Analytics Tests Work</h1>
        <p>
            The two classes below Cls 1 (red) and Cls 2 (green) are multidemensional data representations
            of some previously generated data points. The other graphs that fill the screen are distorted versions
            of either Cls 1 or Cls 2. Your Job is to view these data representations and determine which class they
            belong to.
        </p>
        <img src="training_pics/full_graphic_test.jpg" alt="The full data representation test!"
             style="width:600px;height:600px;">
        <!-- buttons under picture-->
        <div class="button-placement" style="padding:10px" >

            <button class="w3-btn" style="margin-right:160px;padding-left:35px;padding-right:35px"
                    onclick="transfer_back()">Back
            </button>
            <button class="w3-btn" style="margin-left:160px;padding-left:35px;padding-right:35px"
                    onclick="training_fwd_movement()">Next
            </button>
        </div>
    </div>

    <!-- Second Training Window-->
    <div class="w3-light-grey w3-center hidden" style="min-height:800px" id="training-selection">
        <h1>How To Choose</h1>
        <p><i><b>How do I choose which class each graph originated from?</b></i></p>
        <div id="selection_first_pics" style="display: inline-block">
            <img src="training_pics/graph_clean.jpg" alt="The full data representation test!"
                 style="width:100px;height:100px;">
            <img src="training_pics/graph_class1.jpg" alt="The full data representation test!"
                 style="width:100px;height:100px;">
            <img src="training_pics/graph_class2.jpg" alt="The full data representation test!"
                 style="width:100px;height:100px;">
        </div>
        <p>
            Each distorted graph is divided up into sections sections. Some sections are clearer representations of the
            classes than others.
            You need to find the section which, to you, best signifies either Cls 1 or 2
        </p>
        <img src="training_pics/graph_sections.jpg" alt="The full data representation test!"
             style="width:100px;height:100px;">
        <p>
            By clicking on the section you believe to be the best signifier of its class,
            the color of that section will change to reflect that.
        </p>
        <img src="training_pics/graph_class1_selection.jpg" alt="The full data representation test!"
             style="width:100px;height:100px;">
        <p>
            After the first click, the color of the chosen selection will change red to signify it has been selected as
            a Cls 1 graph.
            Clicking on it a second time will change it to green, the corisponding color of the Cls 2 graph. If clicked
            a third time
            it will revert back to its original unaltered state.
        </p>
        <img src="training_pics/graph_class2_selection.jpg" alt="The full data representation test!"
             style="width:100px;height:100px;">
        <img src="training_pics/graph_og_state.jpg" alt="The full data representation test!"
             style="width:100px;height:100px;">
        <p>
        </p>
        <!-- buttons under pictures-->
        <div class="button-placement" style="padding:10px">
            <button class="w3-btn" style="margin-right:160px;padding-left:35px;padding-right:35px"
                    onclick="transfer_back()">
                Back
            </button>
            <button class="w3-btn" style="margin-left:160px;padding-left:35px;padding-right:35px"
                    onclick="training_fwd_movement()">
                Practice
            </button>
        </div>
    </div>

    <!-- Third Training Window-->
    <div class="w3-light-grey w3-center hidden" style="min-height:800px" id="training-practice">

        <div class="w3-row" id="svg-row">

        </div>

        <h1>Training: Practice</h1>
        <div class="w3-row" id="graph_space">

        </div>

        <!-- buttons under practice-->
        <div class="w3-row" id="practice_button_space"  style="padding:10px">
            <div class="button-placement">
                <button class="w3-btn" style="margin-right:160px;padding-left:35px;padding-right:35px"
                        onclick="transfer_back()"> Back
                </button>
                <button class="w3-btn" style="margin-left:160px;padding-left:35px;padding-right:35px"
                        onclick="training_fwd_movement()">
                    See results
                </button>
            </div>
        </div>
    </div>

    <!-- Fourth Training Window-->
    <div class="w3-light-grey w3-center hidden" style="min-height:800px" id="training-results">
        <h1>Practice Results</h1>

        <div class="w3-row result-framing" style="height:100%">

            <div class="w3-row w3-container w3-justify w3-indigo" id="results_section">
                <p style="color:yellow;">OVERALL RESULT: </p>
                <p style="color:yellow;">OVERALL TIME </p>
                <p style="color:yellow;">AVERAGE TIME SPENT ON A GRAPH: </p>
                <p style="color:yellow;">MOST MISSED GRAPH TYPE: </p>
                <p style="color:yellow;">KEY SECTIONS SELECTED: </p>
                <br><br><br><br><br><br><br><br><br><br><br><br><br>
                <br><br><br><br><br>
            </div>

        </div>
        <!-- buttons under results-->
        <div class="button-placement w3-row" id="results_button_space" style="padding:10px; margin-top:65px">

            <button class="w3-btn" style="margin-right:160px;padding-left:35px;padding-right:35px"
                    onclick="transfer_back()">
                Back
            </button>
            <button class="w3-btn" style="margin-left:160px;padding-left:35px;padding-right:35px"
                    onclick="training_fwd_movement()">
                Return to home
            </button>
        </div>
    </div>

    <!-- Main Admin Control Panel -->
    <div class="w3-light-grey w3-center hidden" style="height:800px" id="main-admin-panel">

        <div class="w3-dark-grey w3-center w3-quarter hide-scrollbar" style="height:800px">

            <select class="w3-select" name="option" id="test-template-filter">
                <option value="0">Any</option>
                <option value="1">1 - Star</option>
                <option value="2">2 - Line</option>
                <option value="3">3 - Polar</option>
            </select>

            <nav>
                <ul class="w3-ul" style="border-bottom: 0px solid #ddd;" id="test-template-list"></ul>
            </nav>

        </div>

        <div class="w3-dark-grey w3-quarter w3-padding-16 w3-border" style="height:800px;">

            <div class="w3-row">
                <div class="w3-col w3-padding">
                    <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey" onclick="new_template_handler()">
                        New Template
                    </button>
                </div>
            </div>

            <div class="w3-row">
                <div class="w3-col w3-padding">
                    <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey" onclick="delete_template_handler()">
                        Delete Template
                    </button>
                </div>
            </div>

            <div class="w3-row">
                <div class="w3-col w3-padding">
                    <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey" onclick="view_template_handler()">
                        View Template
                    </button>
                </div>
            </div>

        </div>

        <div class="w3-dark-grey w3-quarter w3-padding-16 w3-border" style="height:800px;">

            <div class="w3-row">
                <div class="w3-col w3-padding">
                    <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey" onclick="view_test_set_handler()">
                        View Test Set
                    </button>
                </div>
            </div>

            <div class="w3-row">
                <div class="w3-col w3-padding">
                    <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey" onclick="export_test_set_handler()">
                        Export
                    </button>
                </div>
                <div class="w3-col w3-padding">
                    <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey" onclick="">
                        <a href="" id="download-button">
                            Download
                        </a>
                    </button>
                </div>
            </div>

            <div class="w3-row">
                <div class="w3-col w3-padding">
                    <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey" onclick="new_test_set_handler()">
                        New Test Set
                    </button>
                </div>
            </div>

            <div class="w3-row">
                <div class="w3-col w3-padding">
                    <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey" onclick="delete_test_set_handler()">
                        Delete Test
                    </button>
                </div>
            </div>

            <div class="w3-row">
                <div class="w3-col w3-padding">
                    <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey" onclick="open_test_handler()">
                        Open Test
                    </button>
                </div>
            </div>

            <div class="w3-row">
                <div class="w3-col w3-padding">
                    <button type="button" class="w3-btn w3-btn-block w3-hover-blue-grey" onclick="close_test_handler()">
                        Close Test
                    </button>
                </div>
            </div>

        </div>

        <div class="w3-dark-grey w3-center w3-quarter hide-scrollbar" style="height:800px;">

            <select class="w3-select" name="option" id="test-status-list-filter-select">
                <option value="0">No Filter</option>
                <option value="1">Running</option>
                <option value="2">Complete</option>
                <option value="3">Parked</option>
            </select>

            <nav>
                <ul class="w3-ul" style="border-bottom: 0px solid #ddd;" id="test-status-list">
                    <li>
                        <div style="display:flex;">
                            <button type="button"
                                    class="w3-btn w3-left w3-threequarter w3-btn-block w3-hover-blue-grey w3-padding-16"
                                    onclick="">
                                
                            </button>
                            <div class="w3-card w3-right w3-quarter">
                                <p></p>
                            </div>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <!-- Admin panel for viewing template details -->
    <div class="w3-light-grey w3-center hidden" style="min-height:800px" id="view-template-admin-panel">
        <!---->
        <div class="w3-dark-grey w3-center w3-quarter hide-scrollbar" style="height: 800px;" id="view-template-left"></div>
        <div class="w3-dark-grey w3-center w3-half hide-scrollbar" style="height:800px;" id="view-template-center">
            <p>
                The Make Up Of The Template
            </p>
        </div>
        <div class="w3-dark-grey w3-center w3-quarter hide-scrollbar" style="height: 800px;" id="view-template-right"></div>

    </div>

    <!-- Admin panel for creating new templates -->
    <div class="w3-light-grey w3-center hidden" style="min-height:800px" id="new-template-admin-panel">
        <!--Used for left w3-quarter spaceing to make the page look nice-->
        <div class="w3-dark-grey w3-center w3-quarter hide-scrollbar" style="height:800px;"></div>
        <!--Used for ceneter w3-half spaceing to make the page look nice-->
        <div class="w3-dark-grey w3-center w3-half  hide-scrollbar" style="height:800px;">

            <!--Form to pass the values for the test-->
            <form id="template_form" onsubmit="serialize_and_pass()">

                <div class="w3-blue-grey w3-row w3-padding-16 w3-margin">
                    <div class="w3-col">
                        Test ID(Name):
                    </div>
                    <div class="w3-col">
                        <input type="text" name="fname" id="fname"><br>
                    </div>
                </div>

                <div id="chooseGraphType">
                    <input type="radio" name="GraphType" value="0" onclick="build_templateGraph(templateGraphDiv, 2, 0, rangeinput1.value)"> STAR
                    <input type="radio" name="GraphType" value="1" onclick="build_templateGraph(templateGraphDiv, 2, 1, rangeinput1.value)"> LINEAR<br>
                </div>

                <div class="w3-blue-grey w3-row w3-padding-16 w3-margin">
                    <div class="w3-col" id="template_Section_Length">
                        Amount Of Datapoints  :
                    </div>
                    <div class="w3-col">
                        <input id="rangeinput1" name="rangeinput1" style="width:60%;" type="range" min="5" max="100" value="20"
                               oninput="
                               amt_of_data_points.value = value;
                               build_templateGraph(templateGraphDiv, 2, $('input[name=GraphType]:checked', '#template_form').val(), rangeinput1.value)">
                        <!--reBuild_DatapointsLen passed num of points and the id to refresh the graph for the user  -->
                        <output id="amt_of_data_points">20</output>
                    </div>
                </div>

                <div class="w3-dark-grey w3-row w3-padding-16">
                    <input type="submit" class="w3-btn" value="Create Exam">
                </div>
            </form>

            <div class="w3-dark-grey w3-row" id="templateGraphDiv">
            </div>

        </div>

        <!--Used for right w3-quarter spaceing to make the page look nice-->
        <div class="w3-dark-grey w3-center w3-quarter hide-scrollbar" style="height:800px;"></div>

    </div>

    <!-- Admin panel for viewing the details of a test set -->
    <div class="w3-light-grey w3-center hidden" style="min-height:800px" id="view-test-set-admin-panel">

        <div class="w3-half w3-dark-gray w3-center w3-padding-64 w3-padding-jumbo" style="height: 800px;" >
            <div class="w3-white w3-padding-large w3-padding-64 w3-center" id="trial-view-admin-panel-id-list">
                <p>asdfoijadsfio</p>
            </div>
        </div>

        <div class="w3-half w3-dark-gray w3-left-align w3-padding-64" style="height: 800px;"
             id="trial-view-admin-panel-details">

        </div>

    </div>

    <!-- Admin panel for creating new test sets -->
    <div class="w3-light-grey w3-center hidden" style="min-height:800px" id="new-test-set-admin-panel">

        <!--/////////////////////////////////////////////////////////////////////////////////////////////////////-->
        <div class="w3-left-align" id="newTestSetsDiv">
            <table border=0>
                <tr>
                    <td>
                        <select name="CurrentTemplates" id="CurrentTemplatesID" multiple size=10 onchange="addToSelectedTemplates()">
                            <!-- Need to populate with the templates-->
                            <option value="George">George</option>
                            <option value="Fred">Fred</option>
                            <option value="Ryan">Ryan</option>
                            <option value="Angela">Angela</option>
                            <option value="Jill">Jill</option>
                        </select>
                    </td>
                    <td valign=MIDDLE align=CENTER>
                        <input type="button" name="right" value="&gt;&gt;" onclick="addToSelectedTemplates()"><br><br>
                        <input type="button" name="right" value="All &gt;&gt;" onclick="opt.transferAllRight()"><br><br>
                        <input type="button" name="left" value="&lt;&lt;" onclick="opt.transferLeft()"><br><br>
                        <input type="button" name="left" value="All &lt;&lt;" onclick="opt.transferAllLeft()">
                    </td>
                    <td>
                        <select name="SelectedTemplates" id="SelectedTemplatesID" multiple size=10 ondblclick="opt.transferLeft()">
                            <!--Need to allow multiple of the same template-->

                        </select>
                    </td>
                </tr>
            </table>
        </div>

        <!--////////////////////////////////////////////////////////////////////////////////////////////////////-->


    </div>



        <!--////////////////////////////////////////////////////////////////////////////////////////////////////-->
      <!--  <div class="w3-half w3-dark-gray w3-center w3-padding-64 w3-padding-jumbo" style="height: 800px;" >
            <select id="template-selector"></select>
        </div>

        <div class="w3-half w3-dark-gray w3-left-align w3-padding-64" style="height: 800px;">

        </div> -->

    </div>

</div>

<li id="test-status-list-element-template" class="hidden">
    <div style="display:flex;">
        <button type="button" class="w3-btn w3-left w3-threequarter w3-btn-block w3-hover-blue-grey w3-padding-16"
                onclick="">
        </button>
        <div class="w3-card w3-right w3-quarter w3-padding-16">
            <p></p>
        </div>
    </div>
</li>

<!-- Footer -->
<footer class="w3-container w3-black w3-padding-16">
    <p>Powered by <a href="http://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
    <p>Created by Elliott, Mitchell, Anthony</p>
</footer>

</body>
</html>
